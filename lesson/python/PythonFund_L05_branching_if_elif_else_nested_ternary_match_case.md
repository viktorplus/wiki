# Python Fundamentals — Lesson 5: Branching (`if/elif/else`), nested `if`, ternary, `match-case`

Конспект по теме **операторов ветвления**: как писать условия, как работает неявное приведение к `bool`, чем отличается `if-elif-else` от нескольких `if`, как читать вложенные условия, и когда применять тернарный оператор или `match-case`.

---

## 1) Операторы ветвления: зачем нужны
Операторы ветвления позволяют **выполнять разные блоки кода** в зависимости от условия.

Основные ключевые слова:
- `if` — выполнить блок, если условие истинно
- `elif` — “иначе если…”, дополнительные условия
- `else` — “иначе…”, когда все предыдущие условия ложны

---

## 2) `if`: синтаксис и базовые правила
```py
if condition:
    # код выполнится, если condition == True
# код дальше — уже не часть if
```

Важно:
- после условия ставим `:`
- тело блока — **строго с отступом** (обычно 4 пробела)
- если условие ложно, блок `if` просто пропускается

Пример:
```py
x = 10
if x > 5:
    print("x больше 5")   # выполнится

y = 1
if y == 0:
    print("y равняется 0")  # не выполнится
```

---

## 3) Неявное преобразование в `bool` (truthy/falsey)
В `if` можно писать не только `True/False`. Любое значение **неявно приводится к bool**.

Обычно ложно (`False`):
- `0`
- `""` (пустая строка)
- `None`
- пустые коллекции: `[]`, `{}`, `()`

Обычно истинно (`True`):
- любые ненулевые числа (`5`, `-1`, `3.14`)
- непустые строки (даже `"0"` или `"False"`)
- непустые коллекции

Пример:
```py
a = 5
if a:
    print("5 интерпретируется как True")

s = ""
if s:
    print("не выполнится")
else:
    print("пустая строка -> False")
```

---

## 4) `elif`: несколько альтернатив
```py
if condition1:
    ...
elif condition2:
    ...
elif condition3:
    ...
```

Правила:
- `elif` нельзя использовать без `if`
- можно писать **сколько угодно** блоков `elif`
- выполнится **только один** блок из цепочки (`if/elif/else`) или ни один (если нет `else`)

Пример:
```py
age = 25
if age < 18:
    print("Несовершеннолетний")
elif age < 30:
    print("Молодой взрослый")
elif age < 50:
    print("Взрослый")
else:
    print("Пожилой")
```

---

## 5) `else`: когда ничего не подошло
`else` выполняется, если **все условия выше — False**.

```py
x = 3
if 1 < x < 5:
    print("x между 1 и 5")
else:
    print("x не между 1 и 5")
```

---

## 6) Несколько независимых `if` ≠ `if-elif-else`
### 6.1 Несколько `if` (независимые проверки)
Каждый `if` проверяется отдельно — может выполниться **несколько блоков**.

```py
x = 7
if x > 5:
    print("x больше 5")
if x < 10:
    print("x меньше 10")
if x == 7:
    print("x равно 7")
```

### 6.2 `if-elif-else` (взаимоисключающие ветки)
Выполнится **только одна ветка**.

---

## 7) Важная ловушка: `else` привязывается к ближайшему `if`
Классическая ошибка: кажется, что `else` относится к первому `if`, но на самом деле — ко **второму**.

```py
x = 25
if x > 10:
    print("x больше 10")
if x > 20:
    print("x больше 20")
else:
    print("x меньше или равно 20")
```

Результат:
- `"x больше 10"` — да
- `"x больше 20"` — да
- `else` НЕ выполнится (он относится ко 2-му `if`, а условие там True)

Если нужен один блок выбора — используй `if-elif-else`.

---

## 8) Вложенные условия (nested if)
Вложенный `if` — это `if` внутри `if`.

```py
role = "admin"
section_access = True

if role == "admin":
    print("Вы администратор.")
    if section_access:
        print("У вас есть доступ к разделу.")
    else:
        print("У вас нет доступа к разделу.")
else:
    print("Вы не администратор.")
```

Правила:
- каждый уровень вложенности = новый отступ
- вложенность полезна, когда проверка 2-го условия имеет смысл только если 1-е True

---

## 9) Как убрать лишнюю вложенность (через `and/or/not`)
Иногда вложенные условия можно переписать более “плоско”:

**Было (вложенно):**
```py
if age_valid:
    if region_allowed or special_permission:
        print("Доступ разрешен.")
    else:
        print("Ваш регион не поддерживается.")
else:
    print("Возраст не соответствует требованиям.")
```

**Стало (без вложенности):**
```py
if not age_valid:
    print("Возраст не соответствует требованиям.")
elif not (region_allowed or special_permission):
    print("Ваш регион не поддерживается.")
else:
    print("Доступ разрешен.")
```

---

## 10) Тернарный оператор (короткий `if-else`)
Синтаксис:
```py
value_if_true if condition else value_if_false
```

Пример:
```py
age = 18
status = "Взрослый" if age >= 18 else "Несовершеннолетний"
print(status)
```

Ещё пример:
```py
x = 10
print("Чётное" if x % 2 == 0 else "Нечётное")
```

Когда **не стоит** использовать:
- если условие или действия сложные → ухудшается читаемость

Вложенный тернарный (можно, но осторожно):
```py
score = 80
grade = "Отлично" if score > 90 else "Хорошо" if score > 75 else "Удовлетворительно" if score > 50 else "Неудовлетворительно"
```

---

## 11) `match-case` (Python 3.10+)
`match-case` упрощает “много вариантов” вместо длинного `if-elif-elif...`.

Синтаксис:
```py
match expr:
    case pattern1:
        ...
    case pattern2:
        ...
    case _:
        ...   # default
```

### 11.1 Несколько вариантов через `|`
```py
number = 7

match number:
    case 1:
        print("Это один.")
    case 2 | 3:
        print("Это два или три.")
    case _ if number > 5:
        print("Число больше 5.")
    case _:
        print("Это число меньше или равно 5.")
```

### 11.2 Проверка по типу
```py
value = "Hello"

match value:
    case int():
        print("Это целое число.")
    case str():
        print("Это строка.")
    case bool():
        print("Это логический тип.")
    case _:
        print("Неизвестный тип данных.")
```

---

## 12) Ответы на мини-тесты (из урока)
1) 
```py
x = ""
if x: ...
else: ...
```
Результат: **выполнится `else`** (пустая строка → False)

2) Про код с двумя `if` (x=25) и `else` — верно: **печатается “x больше 10” и “x больше 20”**

3) Вложенный `if` с `x=7` и условием `if x > 8:` — **не выведет ничего**

4) Тернарный оператор с `temperature = 30`: результат **"Жарко"**

5) `match` с `number=2` и `case 1 | 2 | 3`: результат **"Это один, два или три"**

---

## 13) Практическая работа (готовые решения)

### 13.1 Знак числа
```py
num = int(input("Введите число: "))

if num > 0:
    print("Число положительное.")
elif num < 0:
    print("Число отрицательное.")
else:
    print("Число равно нулю.")
```

### 13.2 Стоимость билета
Условия:
- дети до 12: скидка 50% на любой билет
- взрослые 12..60: полная стоимость
- старше 60: скидка 30% только на стандартный
- стандартный: 1000, vip: 3000

```py
ticket_type = input("Введите тип билета (стандартный/vip): ").strip().lower()
age = int(input("Введите возраст: "))

if ticket_type == "vip":
    price = 3000
else:
    price = 1000

if age < 12:
    price *= 0.50
elif age > 60 and ticket_type == "стандартный":
    price *= 0.70

print("Стоимость билета:", price)
```

---

## 14) Домашнее задание (решения)

### 14.1 Сортировка трёх чисел по возрастанию
Простой вариант через `sorted`:
```py
a = float(input("a: "))
b = float(input("b: "))
c = float(input("c: "))

nums = sorted([a, b, c])
print(nums[0], nums[1], nums[2], sep=", ")
```

### 14.2 Високосный год
Правило:
- делится на 4 и не делится на 100
- или делится на 400

```py
year = int(input("Введите год: "))

is_leap = (year % 4 == 0 and year % 100 != 0) or (year % 400 == 0)

if is_leap:
    print("Год високосный.")
else:
    print("Год не високосный.")
```

---

## 15) Мини-шпаргалка
```text
if condition:
    ...
elif condition:
    ...
else:
    ...

Falsey: 0, "", None, [], {}, ()
Truthy: всё остальное

несколько if -> может выполниться много блоков
if-elif-else -> выполнится 0 или 1 ветка

тернарный:
A if condition else B

match-case (3.10+):
match x:
  case 1 | 2:
    ...
  case _:
    ...
```
