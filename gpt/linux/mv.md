# mv — шпаргалка

Коротко: `mv` перемещает или переименовывает файлы/каталоги, замещая целевой файл, если не указан специальный режим.
#mv, #linux, #filesystem
---

## Синтаксис

```
mv [OPTIONS] SOURCE... DEST
mv file.txt ../archive/
mv oldname.sh newname.sh
```

Если `DEST` — существующая директория, `mv` помещает туда исходные файлы. Иначе переименовывает последний файл в новый путь.

## Основные опции

- `-i` — интерактивно запрашивать замену (prompt)
- `-n` — не перезаписывать существующие файлы (no-clobber)
- `-u` — перезаписывать только если источник новее назначения
- `-v` — показать, что делается (verbose)
- `-b` — создать резервную копию перезаписываемого файла (как `cp --backup`)
- `--backup=MODE` (`none`, `off`, `numbered`, `existing`, `simple`)
- `-S SUFFIX` — суффикс для резервной копии (в комбинации с `-b`)

## Типовые сценарии

- Переместить файл в каталог:
  `mv config.yaml /etc/app/`
- Переименовать файл:
  `mv old.log old.log.bak`
- Переместить несколько файлов:
  `mv *.txt ~/texts/`
- Переименовать директорию:
  `mv project project.old`
- Слияние каталогов (если TARGET не существует — переименование; если существует, перемещаются файлы внутрь):
  `mv tmp/backup/ project/`
- Переместить и не перезаписывать существующие:
  `mv -n new.conf /etc/app/`
- Перенос с подтверждением:
  `mv -iv secret.key ~/secrets/`
- Получить лог действий:
  `mv -v file{1,2}.txt /tmp/`

## Безопасность и советы

- Используйте `-i` или `-n`, чтобы случайно не потерять данные при замене.
- Перед массовыми перемещениями проверьте `ls TARGET` / `tree TARGET`, чтобы понять структуру.
- Если вы хотите переместить только, когда источник новее или target отсутствует, используйте `-u`.
- Режим `--backup=numbered` полезен при автоматизированных обновлениях конфигов (backup `file~1~`).
- В скриптах лучше использовать `mv -f` (force) только если вы уверены, что перезапись безопасна.
- Для переименования через `find`/`xargs` используйте `find ... -exec mv {} DEST \\;` с осторожностью, чтобы не переместить каталоги внутрь себя.

## Ссылки

- `man mv`
- GNU Coreutils: https://www.gnu.org/software/coreutils/mv

---

Вернуться к [главной странице](./README.md).
