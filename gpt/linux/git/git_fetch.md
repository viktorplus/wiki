````markdown
# Шпаргалка по команде `git fetch`

`git fetch` — это команда в Git, которая используется для **получения последних изменений** из удалённого репозитория **без их слияния** с твоей текущей веткой. Это первый шаг для получения обновлений, после чего ты можешь принять решение о том, что делать с полученными данными.

В отличие от `git pull`, который **автоматически сливает** изменения с удалённого репозитория в твою локальную ветку, `git fetch` **только забирает** изменения и **не сливает их**. Это позволяет тебе **проверить изменения** перед их интеграцией.

---

## 1. Основной синтаксис

```bash
git fetch [<remote>] [<branch>]
````

- **`<remote>`** — имя удалённого репозитория, обычно это `origin`.
    
- **`<branch>`** — имя ветки, которую ты хочешь забрать. Если не указать ветку, будут забраны все ветки по умолчанию.
    

### Примеры:

1. **Забрать все изменения из удалённого репозитория:**
    

```bash
git fetch origin
```

- Эта команда заберёт все изменения с удалённого репозитория `origin`, но не будет сливать их в твою текущую ветку.
    

2. **Забрать изменения для конкретной ветки:**
    

```bash
git fetch origin main
```

- Забирает изменения только для ветки `main` с удалённого репозитория `origin`.
    

---

## 2. Как работает `git fetch`

1. **Получение данных с удалённого репозитория**:  
    Git обращается к удалённому репозиторию, чтобы получить информацию о новых коммитах, ветках и тегах.
    
2. **Обновление локальных ссылок**:  
    После того как изменения загружены, Git обновляет локальные **ссылки** на удалённые ветки (например, `origin/main`).
    
3. **Без слияния изменений**:  
    `git fetch` не будет вносить изменений в твою текущую ветку, пока ты явно не сделаешь слияние или rebase. Это дает тебе возможность **проверить изменения** перед тем, как интегрировать их в свою работу.
    

---

## 3. Полезные флаги и опции

### 3.1. `git fetch --all` — забрать все изменения для всех удалённых репозиториев

```bash
git fetch --all
```

- Эта команда заберёт изменения для всех удалённых репозиториев, привязанных к твоему проекту (например, `origin`, `upstream` и т.д.).
    

---

### 3.2. `git fetch -p` — удалить удалённые ветки, которые были удалены на сервере

```bash
git fetch -p
```

- Опция `-p` (или `--prune`) заставляет Git **удалить** локальные ссылки на ветки, которые были удалены на удалённом сервере.
    

**Пример**:  
Если на сервере была удалена ветка, например, `feature/old-feature`, то после выполнения `git fetch -p`, ссылка на эту ветку будет удалена локально.

---

### 3.3. `git fetch <remote> <branch>:<local-branch>` — забрать удалённую ветку и записать её в локальную ветку

```bash
git fetch origin main:main
```

- Это заберёт изменения из удалённой ветки `main` на `origin` и запишет их в твою локальную ветку `main`.
    

---

### 3.4. `git fetch --depth <n>` — сделать «поверхностный» fetch

```bash
git fetch --depth 1
```

- Эта команда ограничивает количество загружаемых коммитов. В примере будет загружен только последний коммит для каждой ветки.
    
- Это полезно, если тебе нужно только самое актуальное состояние репозитория без всей истории изменений.
    

**Примечание:**  
Если тебе нужно больше коммитов в будущем, можно убрать ограничение, используя `--unshallow`:

```bash
git fetch --unshallow
```

---

## 4. Разница между `git fetch` и `git pull`

|**Команда**|**Что делает**|
|---|---|
|`git fetch`|Получает изменения с удалённого репозитория, но не сливает их с текущей веткой.|
|`git pull`|Получает изменения и сразу **сливает их** с текущей веткой (посредством `git merge` или `git rebase`).|

- `git fetch` даёт тебе больше **контроля**, потому что ты сначала забираешь изменения и можешь проверить их перед слиянием.
    
- `git pull` автоматически сливает изменения, что иногда может привести к нежелательным конфликтам или несоответствиям.
    

---

## 5. Типичные ошибки при `git fetch`

### 5.1. `fatal: Could not read from remote repository`

**Что значит:**  
Git не может подключиться к удалённому репозиторию. Это может быть связано с:

- неправильными SSH-ключами,
    
- проблемами с сетью,
    
- ошибками в URL удалённого репозитория.
    

**Решение:**

1. Проверь, правильно ли настроен удалённый репозиторий:
    

```bash
git remote -v
```

2. Проверь, есть ли SSH-ключи, если ты используешь SSH для подключения:
    

```bash
ssh -T git@github.com
```

3. Если ты используешь HTTPS, убедись, что у тебя правильный логин и пароль (или токен).
    

---

### 5.2. `fatal: No remote repository specified`

**Что значит:**  
Ты попытался выполнить `git fetch`, но не указал удалённый репозиторий.

**Решение:**  
Убедись, что у тебя есть удалённый репозиторий, настроенный как `origin` или другой, и укажи его явно.

```bash
git fetch origin
```

---

### 5.3. `fatal: not a git repository (or any of the parent directories): .git`

**Что значит:**  
Ты выполняешь команду в директории, которая **не является репозиторием Git**.

**Решение:**  
Перейди в каталог, который инициализирован как Git репозиторий, или инициализируй новый репозиторий:

```bash
git init
```

---

## 6. Как проверить, что было получено после `git fetch`

Чтобы увидеть, что было загружено с удалённого репозитория, используйте:

```bash
git log --oneline origin/main
```

- Это покажет последние коммиты для удалённой ветки `origin/main`.
    
- Сравни их с твоей локальной веткой, чтобы увидеть, что было обновлено.
    

---

## 7. Резюме

|Команда|Описание|
|---|---|
|`git fetch`|Загружает изменения с удалённого репозитория без слияния.|
|`git fetch origin`|Загружает изменения из удалённого репозитория `origin`.|
|`git fetch --all`|Загружает изменения из всех удалённых репозиториев.|
|`git fetch -p`|Удаляет локальные ссылки на удалённые ветки, которые были удалены на сервере.|
|`git fetch <remote> <branch>:<local-branch>`|Забирает удалённую ветку и записывает её в локальную ветку.|
|`git fetch --depth <n>`|Ограничивает количество загружаемых коммитов.|

---

Если возникнут вопросы или ошибки при `git fetch`, просто пришли текст ошибки — разберём, что и как исправить в твоём конкретном случае!