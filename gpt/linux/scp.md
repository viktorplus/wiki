# scp через SSH

Описание: `scp` копирует файлы по SSH, полезен для простых переносов между серверами без настройки rsync.
#scp, #linux, #ssh
---

## Команды

```
scp [OPTIONS] source target
scp file.txt user@host:/path/
scp user@host:/path/file.txt ./local-copy
```

Можно копировать с локального хоста на удаленный, с удаленного на локальный или между двумя удаленными машинами через `user@host:/path`.

## Часто используемые опции

- `-r` — копировать каталоги рекурсивно.
- `-P PORT` — указать нестандартный порт SSH (обратите внимание на заглавную `-P`).
- `-p` — сохранять метки времени и режимы.
- `-C` — включить сжатие.
- `-i identity_file` — использовать конкретный приватный ключ.
- `-l limit` — ограничить пропускную способность в КБ/с.
- `-q` — тихий режим (прогресс скрыт).
- `-v` — подробный вывод (можно использовать несколько раз для отладки).
- `-o 'Option=Value'` — пробросить опции SSH, например `-o 'ProxyJump=jump:22'` или `-o 'StrictHostKeyChecking=no'`.

## Примеры

- **Локально → удаленно**:
  `scp build.zip user@server:/var/www/app/`
- **Удаленно → локально**:
  `scp user@server:/var/log/app.log ./`
- **С каталогом**:
  `scp -r project user@server:~/backup/`
- **С другим портом**:
  `scp -P 2222 file user@server:/tmp/`
- **Через jump-хост**:
  `scp -o 'ProxyJump=jump-host' file target:/path`
- **Копирование между хостами**:
  `scp user1@host1:/data/db.sql user2@host2:/backup/`
- **Кавычки для шаблонов**:
  `scp "user@server:/var/log/app/*.log" ./logs/`

## Советы

- Если передача длится дольше, используйте `rsync -avz --progress` для возобновления.
- Настраивайте алиасы и параметры в `~/.ssh/config` (`Host`, `User`, `Port`).
- При копировании больших файлов добавьте `-C` и `-l` для ограничения.
- `scp` не умеет возобновлять перебитые соединения — используйте `rsync`/`sftp` для сложных задач.

## Что помнить

- `scp` работает поверх SSH, поэтому все параметры безопасности наследуются от SSH.
- Можно комбинировать `scp` с `ProxyCommand`/`ProxyJump`.
- Для множества файлов удобнее `tar` + `ssh` или `rsync`.

---


Вернуться к [главной странице](./README.md).
