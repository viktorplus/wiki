# tail — шпаргалка

Коротко: `tail` показывает последние строки файла или потоков, удобно для логов; поддерживает непрерывный вывод (follow), смещение и фильтры.
#tail, #linux, #logs
---

## Синтаксис

```
tail [OPTIONS] [FILE...]
tail -n 20 /var/log/syslog      # последние 20 строк
tail -f /var/log/nginx/access.log  # следить за логом
```

Если `FILE` не указан, `tail` читает из stdin.

## Основные опции

- `-n NUM` / `--lines=NUM` — сколько строк показать (`tail -n 50`). Можно использовать `+NUM`, чтобы начать с этой строки.
- `-c NUM` / `--bytes=NUM` — показать последние байты
- `-f` — следить за добавлением новых строк (документирует поток)
- `-F` — как `-f`, но пересоздаёт файл при ротации
- `--pid=PID` — завершить `tail` при остановке указанного PID (часто вместе с `-f`)
- `-q` — не печатать заголовки при работе с несколькими файлами
- `-v` — всегда печатать заголовок (имя файла)

## Пайпы и фильтрация

```
journalctl -u nginx -f | tail -n 20     # последние логи с флагом follow
grep ERROR /var/log/app.log | tail -n 5 # пять последних ошибок
command | tail -n +10                  # пропустить первые 9 строк
```

## Частые сценарии

- Смотреть лог в реальном времени:
  `tail -F /var/log/nginx/error.log`
- Увидеть последние изменения в нескольких файлах:
  `tail -n 20 file1 file2`
- Отследить поведение после перезапуска сервиса:
  `systemctl restart app && sleep 1 && tail -n 30 /var/log/app.log`
- Использовать `tail` как часть health checks:
  `tail -n 0 -f /var/log/app.log | grep --line-buffered "ERROR"`

## Советы

- Текущая версия `tail` в coreutils поддерживает `--follow=name --retry`, но `-F` удобнее, если лог ротации переименовывается.
- Используйте `tail -n +1` вместо `cat`, если нужно фильтровать поток.
- В скриптах можно использовать `tail --pid=$$ -f logfile` для автоматического завершения вместе со скриптом.
- Для больших файлов используйте `tail -c 100K` для последних 100K байт, особенно если строки длинные.
- Если нужно объединить `tail` и `awk`, делайте `tail -n 100 file | awk '/ERROR/{print $0}'`.

## Ссылки

- `man tail`
- GNU Coreutils: https://www.gnu.org/software/coreutils/tail

---

???????? ? [??????? ????????](./README.md).

???????? ? [??????? ????????](./README.md).


Вернуться к [главной странице](./README.md).
