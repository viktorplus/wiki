# top & htop — шпаргалка

Коротко: `top` и `htop` — интерактивные мониторы процессов; `top` входит в base, `htop` удобнее (цвет, мышь, легко сортировать/убирать столбцы).
#top, #htop, #linux, #processes
---

## top: быстрый стейт

```
top
```
Показывает обновляемый снимок (по умолчанию каждые 3 сек). Основные клавиши:

- `M` — сортировка по `%MEM`
- `P` — по `%CPU`
- `T` — по `TIME+`
- `k` — отправить сигнал (по умолчанию TERM)
- `r` — nice (приоритет) процесса
- `c` — переключить отображение команды (`COMMAND`) vs путь (`CMDLINE`)
- `i` — пропустить спящие процессы
- `u` — показать только процессы пользователя
- `f`/`o` — выбрать/настроить столбцы
- `d` — изменить интервал обновления (в секундах)
- `q` — выйти

Опции при запуске:

- `top -u user` — процессы конкретного пользователя
- `top -p 1234,2345` — отобразить указанные PID
- `top -o %MEM` — сразу сортировать

Статистика в верхней части:

- Load average (1/5/15 мин)
- Tasks (зомби/спящие), %CPU по состояниям (us, sy, id, etc.)
- RAM и swap

## htop: более дружелюбный интерфейс

```
htop
```
Появляется цветной интерфейс с полосами CPU и памяти, мышь/клавиши.

Клавиши:

- `F2` — меню настроек (конфигурация колонок, цвета, клавиши)
- `F3` (`/`) — поиск по имени
- `F4` (``?) — фильтр (grep-like)
- `F5` — дерево процессов (tree view)
- `F6` — сортировка (процент CPU/Memory, процесс и др.)
- `F7`/`F8` — повысить/понизить nice
- `F9` — отправить сигнал
- `F10` — выход

Дополнительно:

- Навигация стрелками, `PgUp/PgDn`, `Home/End`
- `Shift+F` для фильтра по строке
- Цифровые клавиши и `Space` для выбора процессов (можно послать сигнал группе)

## Советы и приёмы

- Используйте `top -b -n 1 > top.out` для одноразового замера (скрипты)
- `htop --sort-key PERCENT_CPU` — сортировка перед запуском
- В `htop` можно сохранить конфиг (`~/.config/htop/htoprc`) и перенести на другую машину
- В `top` включите `Fields Management` (`f`/`o`) и отключите ненужные поля, чтобы отслеживать `RES`, `SHR`, `TIME+`
- Для поиска процесса откройте `htop`, нажмите `F3`, введите часть команды
- `top` можно запустить через `sudo` чтобы видеть процессы других пользователей без `u`.

## Сравнение с другими инструментами

- `ps` — статический снимок, сочетайте с `top`/`htop` для анализа
- `glances`, `bpytop` — более продвинутые GUI-мониторы

## Источники и справка

- `man top`, `man htop`
- `htop` на GitHub: https://github.com/htop-dev/htop

---

Вернуться к [главной странице](./README.md).
