````markdown
# Шпаргалка по `.gitignore`

`.gitignore` — файл, в котором ты говоришь Git’у: **какие файлы и папки не нужно отслеживать** (не добавлять в коммиты).

---

## 1. Общие принципы

- Файл называется **`.gitignore`** и лежит в репозитории (обычно в корне).
- Можно иметь **несколько** `.gitignore` — в разных папках:
  - каждый действует только для **своей папки и всего, что ниже**.
- `.gitignore` влияет **только на неотслеживаемые файлы**:
  - если файл уже закоммичен, он не исчезнет из Git сам по себе.

Чтобы перестать отслеживать уже добавленный файл (но оставить его на диске):

```bash
git rm --cached path/to/file
git commit -m "Stop tracking path/to/file"
````

---

## 2. Базовый синтаксис `.gitignore`

Файл состоит из строк-шаблонов:

```text
# комментарий
*.log
*.tmp
secret.txt
build/
!keep.me
```

### 2.1. Комментарии и пустые строки

```text
# Это комментарий
# Пустая строка:

```

- Строка, начинающаяся с `#`, — комментарий.
    
- Пустые строки используются просто для разделения блоков.
    

---

### 2.2. Обычные имена файлов и папок

```text
secret.txt
config.local.json
node_modules
```

- `secret.txt` — игнорировать файл с таким именем во **всех** папках.
    
- `node_modules` — игнорировать папки `node_modules` в **любой** глубине.
    

---

### 2.3. Маски `*` и `?`

- `*` — любое количество символов (кроме `/`).
    
- `?` — ровно один любой символ (кроме `/`).
    

Примеры:

```text
*.log      # error.log, app.log, server.log
*~         # file~, test.py~, notes~
?.log      # a.log, b.log, но не app.log
```

---

### 2.4. Начальный слэш `/` (привязка к корню)

Если правило **начинается с `/`**, оно относится только к **корню репозитория**.

```text
/config.json      # только config.json в КОРНЕ
/logs/            # только папка logs в КОРНЕ
```

Без `/` — правило работает везде:

```text
config.json       # config.json в любой папке
logs/             # папка logs в любой глубине
```

---

### 2.5. Конечный слэш `/` (каталог)

```text
build/      # игнорировать папку build и всё внутри
tmp/        # игнорировать ВСЕ папки tmp/
```

---

### 2.6. Двойная звёздочка `**` (рекурсивные пути)

`**` может заменять **произвольное количество уровней каталогов**.

```text
logs/**/debug.log
```

- Игнорировать `debug.log` во всех подкаталогах внутри `logs`.
    

```text
**/__pycache__/
```

- Игнорировать все папки `__pycache__` в любом месте проекта.
    

```text
**/*.log
```

- Игнорировать все `.log` файлы по всему репо.
    

---

### 2.7. Отрицание правила `!`

`!` в начале строки **отменяет игнор** для указанного пути  
(но только если до этого что-то более широкое его игнорировало).

```text
*.log         # игнорировать все .log
!important.log
```

- Все `*.log` игнорируются,
    
- **кроме** `important.log`.
    

Ещё пример:

```text
tmp/
!tmp/keep.me
```

- Игнорируем папку `tmp/`,
    
- Но **не** игнорируем файл `tmp/keep.me`.
    

> Важно: re-include (`!`) может не сработать, если родительская папка игнорируется слишком общим правилом.

---

### 2.8. Экранирование спецсимволов

Если нужно использовать спецсимвол **как обычный символ**:

```text
\#file.txt    # файл с именем "#file.txt"
\!important   # файл "!important"
\*.txt        # буквально "*.txt", а не маска
```

---

## 3. Уже отслеживаемые файлы и `.gitignore`

**Распространённая ошибка:**  
Сначала закоммитили файл, потом добавили его в `.gitignore` и ждём, что Git его «забудет».

Но `.gitignore` **не удаляет** файлы из истории и индекса.

Если файл уже отслеживается:

```bash
git rm --cached settings.py
git commit -m "Stop tracking settings.py"
```

После этого:

- файл останется на диске,
    
- Git перестанет его отслеживать,
    
- правило в `.gitignore` начнёт работать.
    

---

## 4. Локальный игнор: `.git/info/exclude`

Если нужно игнорировать **что-то только у себя**, не засоряя `.gitignore` в репо:

- Открой файл: `.git/info/exclude`
    
- Формат такой же, как у `.gitignore`.
    

Пример:

```text
# Личные локальные файлы
notes.txt
local-experiments/
```

Это удобно для:

- личных файлов,
    
- временных скриптов,
    
- локальных настроек, которых нет у других.
    

---

## 5. Глобальный gitignore (на весь пользовательский аккаунт)

Можно завести **общий** игнор для всех репозиториев на этой машине:

```bash
git config --global core.excludesfile ~/.gitignore_global
```

Создать файл `~/.gitignore_global`:

```text
# ОС
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/
*.iml

# Логи
*.log
```

Теперь эти файлы будут игнорироваться во всех репозиториях.

---

## 6. Проверка, что именно игнорируется

### 6.1. Проверить конкретный файл

```bash
git check-ignore -v path/to/file
```

Git покажет:

- игнорируется ли файл,
    
- какое именно правило и из какого файла (`.gitignore`, `.git/info/exclude`, глобальный) на него сработало.
    

### 6.2. Проверка через `git status`

```bash
git status
```

- Файлы из `.gitignore` **не будут видны** в списке `Untracked files`.
    

---

## 7. Типичные грабли

1. **Ожидание, что `.gitignore` удалит уже отслеживаемый файл**  
    → нужно `git rm --cached`.
    
2. **Перепутал правило относительно корня / всех папок**
    
    - `config.json` — везде;
        
    - `/config.json` — только в корне.
        
3. **Не срабатывает `!` для вложенного файла**
    
    - Часто из-за слишком общего игнора папки:
        
        ```text
        logs/
        !logs/important.log   # может не сработать ожидаемо
        ```
        
4. **Правило слишком широкое**  
    Например, `*.json` может вырубить и нужные конфиги. Лучше писать более конкретно:  
    `secrets.json`, `*.local.json` и т.п.
    

---

## 8. Готовые примеры `.gitignore`

### 8.1. Python + Django + VS Code (универсальный вариант)

```gitignore
# === ОС ===
# macOS
.DS_Store

# Windows
Thumbs.db
Desktop.ini

# === Python ===
__pycache__/
*.py[cod]
*.pyo
*.pyd

# virtualenv
venv/
.env/
.venv/

# pipenv / poetry (по желанию)
Pipfile.lock
poetry.lock

# coverage / тесты
.coverage
htmlcov/
pytest_cache/

# === Django ===
*.log
staticfiles/
media/
db.sqlite3
local_settings.py

# === IDE / редакторы ===
# VS Code
.vscode/

# PyCharm / IDEA
.idea/
*.iml

# === Node / фронтенд (если есть) ===
node_modules/
dist/
build/
*.log

# === конфиги и секреты ===
.env
.env.local
.env.prod
secrets.json
```

---

### 8.2. Минимальный `.gitignore` для простого Python-проекта

```gitignore
__pycache__/
*.py[cod]

# виртуальное окружение
.venv/
venv/
env/

# IDE
.vscode/
.idea/

# логи
*.log
```

---

## 9. Краткая таблица по синтаксису

|Что делает правило|Пример|Значение|
|---|---|---|
|Игнорировать файл по имени|`secret.txt`|Все `secret.txt` в проекте|
|Игнорировать по расширению|`*.log`|Все `.log`|
|Игнорировать папку|`build/`|Папка `build` и всё внутри|
|Только в корне|`/config.json`|`config.json` только в корне|
|Игнорировать во всех подпапках|`**/__pycache__/`|Все `__pycache__` в проекте|
|Отменить игнор|`!important.log`|Не игнорировать `important.log`|
|Экранировать спецсимвол|`\#file.txt`|Игнорировать файл `#file.txt`|

---

```

Если хочешь, могу на основе **твоего конкретного проекта** (Python/Django/WSL/VS Code) собрать отдельный `.gitignore` под тебя: просто скажи стек (есть ли Node, Docker, PostgreSQL и т.п.).
::contentReference[oaicite:0]{index=0}
```