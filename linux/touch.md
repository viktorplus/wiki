# touch — шпаргалка

Коротко: `touch` создаёт пустой файл или обновляет времена доступа/модификации существующего; используется в скриптах и при работе с make-файлами.
#touch, #linux, #filesystem
---

## Синтаксис

```
touch [OPTIONS] FILE...
touch example.txt          # создаёт файл, если его нет
touch -a -m -t 202501011200.00 file
```

Если файл не существует — будет создан пустой с дефолтными правами (умаск). Если существует — меняются времена.

## Основные опции

- `-a` — обновить только время доступа (atime)
- `-m` — обновить только время модификации (mtime)
- `-c`, `--no-create` — не создавать файл, если его нет
- `-t [[CC]YY]MMDDhhmm[.ss]` — задать конкретное время
- `-r ref_file` — скопировать времена из другого файла
- `-d`, `--date=STRING` — использовать удобочитаемое время (`touch -d 'next Mon' file`)
- `-h` — работать с символическими ссылками вместо файла

## Примеры

- Создать пустой файл:
  ```
  touch /tmp/.lock
  ```
- Обновить только дату последнего доступа:
  ```
  touch -a log.txt
  ```
- Установить определённое время:
  ```
  touch -t 202501011200.00 release-ready
  ```
- Копировать метки времени из `template`:
  ```
  touch -r template.conf config.conf
  ```
- В скрипте `Makefile` используется как `$(shell touch stamp)` чтобы обновить метку
- Создать файл и задать права в одной строке:
  ```
  install -m 600 -D /dev/null ~/.ssh/.placeholder
  ```
  (для сравнения: `touch` + `chmod` — два шага)

## Советы

- `touch` без параметров и `-c` создаёт файл, поэтому используйте аккуратно (например, не перезаписывайте шаблоны)
- Для CI/CD можно `touch /tmp/marker && ./deploy`, чтобы сигнализировать о запуске
- `touch` полезен для обхода `make`-зависимостей: `touch file && make` заставляет пересобрать зависимости
- При использовании `rsync --times`, `touch -r` помогает синхронизировать мержевые файлы без пересборки

## Ссылки

- `man touch`
- GNU Coreutils: https://www.gnu.org/software/coreutils/touch

---


Вернуться к [главной странице](./README.md).
