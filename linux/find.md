# find — шпаргалка

Коротко: `find` ищет файлы/каталоги по критериям, позволяет фильтровать по имени, типу, времени, размерам и выполнять команду над результатами.
#find, #linux, #filesystem
---

## Синтаксис

```
find [PATH...] [OPTIONS]
find . -name '*.log'
find /var -type d -maxdepth 2
```

По умолчанию `find` рекурсивно обходит каталоги начиная с указанного пути (по умолчанию `.`).

## Операции и фильтры

- `-name pattern` — имя файла (с учётом регистра); используйте кавычки
- `-iname pattern` — без учёта регистра
- `-path pattern` / `-ipath` — совпадение с путём
- `-type f|d|l` — файл, директория, ссылка
- `-maxdepth N`, `-mindepth N` — ограничение глубины
- `-mtime N` — изменён N дней назад (`-mtime -1` — за последние сутки)
- `-mmin N` — изменён N минут назад
- `-size N[cwbkMG]` — размер (например, `-size +100M`)
- `-user name`, `-group name` — принадлежность
- `-perm mode` — права (например, `-perm 644` или `/u=x`)
- `-empty` — пустые файлы/каталоги
- `-prune` — пропустить каталог (`find . -path './vendor' -prune -o -print`)

## Команды

- `-print` — вывод (по умолчанию; добавляйте `-print0` для безопасного разделения)
- `-exec command {} +` — запускает команду над результатами (`+` группирует)
- `-exec command {} \;` — вызывает команду для каждого элемента
- `-delete` — удалить найденные файлы (осторожно)
- `-printf` — форматированный вывод
- `-newer file` — новее файла
- `-cmin`, `-ctime` — по времени изменения метаданных
- `-links N` — количество ссылок
- `-mindepth 1 -maxdepth 1` — только текущий уровень

## Примеры

- Найти пустые каталоги и удалить:
  ```bash
  find /tmp -type d -empty -delete
  ```
- Найти большие файлы (>100 МБ):
  ```bash
  find . -type f -size +100M -ls
  ```
- Удалить `.pyc` из проекта:
  ```bash
  find . -name '*.pyc' -delete
  ```
- Выполнить `chmod` для найденных файлов:
  ```bash
  find logs -type f -mtime +30 -exec chmod 640 {} +
  ```
- Пропустить каталог `vendor`:
  ```bash
  find . -path './vendor' -prune -o -name '*.go' -print
  ```
- Использовать `-print0` и `xargs -0`:
  ```bash
  find . -name '*.bak' -print0 | xargs -0 rm
  ```
- Поиск в нескольких путях:
  ```bash
  find /etc /usr/local/etc -name 'app.conf'
  ```

## Советы

- С `-print0` и `xargs -0` избегаете проблем с пробелами/спецсимволами.
- `find` можно использовать с `-execdir` (выполняет команду внутри каталога результата).
- Для скорости используйте `-maxdepth` и `-path` вместо обхода всего дерева.
- `fd` — современная альтернатива, но `find` есть везде.
- Проверяйте выходной код: `find ... -exec false {} \; || echo "errors"`.

## Ссылки

- `man find`
- GNU findutils: https://www.gnu.org/software/findutils/

---


Вернуться к [главной странице](./README.md).
